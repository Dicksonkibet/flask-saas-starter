{% extends "base.html" %}

{% block title %}Pricing - Flask SaaS Starter{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold text-primary mb-3">Choose Your Plan</h1>
        <p class="lead text-muted">Select the perfect plan for your business needs</p>
    </div>

    <!-- Current Subscription Status -->
    {% if subscription %}
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-star-fill me-2"></i>Current Subscription</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-muted">Plan</h6>
                            <h4 class="text-capitalize">{{ subscription.plan.value }}</h4>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-muted">Status</h6>
                            <span class="badge bg-{% if subscription.status.value == 'active' %}success{% elif subscription.status.value == 'trial' %}info{% elif subscription.status.value == 'past_due' %}warning{% else %}secondary{% endif %}">
                                {{ subscription.status.value|title }}
                            </span>
                        </div>
                    </div>
                    {% if subscription.stripe_subscription_id %}
                    <div class="mt-3">
                        <small class="text-muted">Subscription ID: {{ subscription.stripe_subscription_id }}</small>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Pricing Plans -->
    <div class="row justify-content-center">
        <!-- Free Plan -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header text-center py-4">
                    <h4 class="fw-bold text-muted">Free</h4>
                    <div class="display-4 fw-bold text-muted">$0</div>
                    <small class="text-muted">forever</small>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Up to 5 users</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>1 GB storage</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Basic support</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Core features</li>
                        <li class="mb-2 text-muted"><i class="bi bi-x-circle me-2"></i>Advanced analytics</li>
                        <li class="mb-2 text-muted"><i class="bi bi-x-circle me-2"></i>Priority support</li>
                    </ul>
                </div>
                <div class="card-footer bg-transparent text-center">
                    {% if subscription and subscription.plan.value == 'free' %}
                    <button class="btn btn-outline-primary w-100" disabled>Current Plan</button>
                    {% else %}
                    <button class="btn btn-outline-primary w-100" disabled>Your Current Plan</button>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Pro Plan -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-lg border-primary">
                <div class="card-header bg-primary text-white text-center py-4">
                    <span class="badge bg-warning position-absolute top-0 end-0 m-2">Popular</span>
                    <h4 class="fw-bold">Pro</h4>
                    <div class="display-4 fw-bold">$29</div>
                    <small>per month</small>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Up to 25 users</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>10 GB storage</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Priority support</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>All core features</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Advanced analytics</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>API access</li>
                    </ul>
                </div>
                <div class="card-footer bg-transparent text-center">
                    {% if subscription and subscription.plan.value == 'pro' %}
                    <button class="btn btn-primary w-100" disabled>Current Plan</button>
                    {% else %}
                    <a href="{{ url_for('main.upgrade_plan', plan_key='pro') }}" class="btn btn-primary w-100">
                        {% if subscription and subscription.plan.value == 'free' %}Upgrade Now{% else %}Switch to Pro{% endif %}
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Enterprise Plan -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header text-center py-4 bg-dark text-white">
                    <h4 class="fw-bold">Enterprise</h4>
                    <div class="display-4 fw-bold">$99</div>
                    <small>per month</small>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Unlimited users</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>100 GB storage</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>24/7 premium support</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>All features included</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Custom integrations</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success me-2"></i>Dedicated account manager</li>
                    </ul>
                </div>
                <div class="card-footer bg-transparent text-center">
                    {% if subscription and subscription.plan.value == 'enterprise' %}
                    <button class="btn btn-dark w-100" disabled>Current Plan</button>
                    {% else %}
                    <a href="{{ url_for('main.upgrade_plan', plan_key='enterprise') }}" class="btn btn-dark w-100">
                        {% if subscription and subscription.plan.value == 'free' %}Upgrade Now{% else %}Go Enterprise{% endif %}
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="row justify-content-center mt-5">
        <div class="col-lg-8">
            <div class="text-center mb-4">
                <h3 class="fw-bold">Frequently Asked Questions</h3>
            </div>
            <div class="accordion" id="pricingFAQ">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                            Can I change my plan later?
                        </button>
                    </h2>
                    <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#pricingFAQ">
                        <div class="accordion-body">
                            Yes, you can upgrade or downgrade your plan at any time. Changes will be reflected in your next billing cycle.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                            Is there a free trial?
                        </button>
                    </h2>
                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                        <div class="accordion-body">
                            Yes! All new accounts start with a 14-day free trial of our Pro plan features.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                            What payment methods do you accept?
                        </button>
                    </h2>
                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                        <div class="accordion-body">
                            We accept all major credit cards through our secure Stripe payment gateway.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}